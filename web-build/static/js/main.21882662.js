(()=>{"use strict";var e={5553:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ft});var r=n(6475),o=n(5861),a=n(891),i=n(3515),l=n(9789),c=n(4506),d=n(885),s=n(8207),u=n(3584),f=n(4186),h=n(5460),g=n(8415),p=n(2844),y=n(3254),x=n(4331),m=n(7715),S=n(7852),b=n(2982),w=n(2448),j=(0,w.createSlice)({name:"data_from_endpoint",initialState:{digStorages:[],stepOrders:[],steps:[],token:[],currentStep:[],groupOrders:[],currentStorageId:"",currentColorStep:"",dataChange:[],notifications:[],totalPlantQty:0,totalOrderQty:0},reducers:{setDigStorages:function(e,t){e.digStorages=t.payload.data},setSteps:function(e,t){e.steps=t.payload.data},setToken:function(e,t){e.token=t.payload},setStepOrders:function(e,t){e.stepOrders=t.payload.data},setGroupOrders:function(e,t){e.groupOrders=t.payload.data},setCurrentStep:function(e,t){e.currentStep=t.payload},setStorageId:function(e,t){e.currentStorageId=t.payload},setNotifications:function(e,t){e.notifications=t.payload.data},setTotalQty:function(e,t){e.totalOrderQty=t.payload.orders,e.totalPlantQty=t.payload.plants},setCurrentColorStep:function(e,t){var n={name:"green",color:"#00721B"},r={name:"yellow",color:"#1FBB43"},o={name:"pink",color:"#83E499"},a={name:"red",color:"#C2DBC7"},i={name:"purple",color:"#A8AFAA"};switch(t.payload){case n.name:e.currentColorStep=n.color;break;case r.name:e.currentColorStep=r.color;break;case o.name:e.currentColorStep=o.color;break;case a.name:e.currentColorStep=a.color;break;case i.name:e.currentColorStep=i.color;break;default:alert("Color not defined!")}},setDataChange:function(e,t){var n=e.dataChange,r=n.findIndex((function(e){return e.orderId===t.payload.orderId&&e.productid===t.payload.productid&&e.characteristicid===t.payload.characteristicid}));r>-1?(n[r]=t.payload,e.dataChange=n):e.dataChange=[].concat((0,b.default)(n),[t.payload])},clearDataChangeItem:function(e,t){var n=e.dataChange,r=n.findIndex((function(e){return e.orderId===t.payload.orderId&&e.productid===t.payload.productid&&e.characteristicid===t.payload.characteristicid}));if(r>-1){n.splice(r,1);e.dataChange=n}},clearDataChange:function(e){e.dataChange=[]},cleanState:function(e){e.token=[],e.steps=[],e.digStorages=[],e.stepOrders=[],e.currentStep=[],e.groupOrders=[],e.currentStorageId="",e.dataChange=[],e.notifications=[],e.totalPlantQty=0,e.totalOrderQty=0}}}),k=j.actions,v=k.setDigStorages,C=k.setStepOrders,O=k.setSteps,z=k.setToken,T=k.cleanState,I=k.setCurrentStep,B=k.setGroupOrders,F=k.setStorageId,R=k.setDataChange,D=k.clearDataChange,A=k.clearDataChangeItem,N=k.setNotifications,W=k.setTotalQty,P=k.setCurrentColorStep;const E=j.reducer;var M=n(8605),_=f.default.create({statusBar:{flexDirection:"row",justifyContent:"center"},buttonsBar:function(e){return{borderRadius:3,backgroundColor:e,minWidth:"18%",height:45,margin:4,alignItems:"center",alignSelf:"center",justifyContent:"center",elevation:3,shadowColor:"black",shadowOffset:{width:-2,height:4},shadowOpacity:.2,shadowRadius:3,flex:3}},selectedButtons:{borderColor:"#f2f5f8",borderWidth:3,borderRadius:6,elevation:0,shadowOffset:{width:0,height:0},shadowOpacity:0,shadowRadius:10,shadowColor:"black"},textBtnBar:{color:"white",fontSize:12,fontWeight:700,alignSelf:"center"}}),L={id:"b5ffdb30-cdb0-11ed-836c-00c12700489e",name:"\u041d\u043e\u0432\u0435",color:"#00721B"},V={id:"b5ffdb2c-cdb0-11ed-836c-00c12700489e",name:"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456",color:"#1FBB43"},q={id:"b5ffdb2e-cdb0-11ed-836c-00c12700489e",name:"\u0412\u0438\u043a\u043e\u043f\u0430\u043d\u043e",color:"#83E499"},G={id:"b5ffdb2d-cdb0-11ed-836c-00c12700489e",name:"\u0412 \u0434\u043e\u0440\u043e\u0437\u0456",color:"#C2DBC7"},Q={id:"b5ffdb2f-cdb0-11ed-836c-00c12700489e",name:"\u041d\u0430 \u0411\u0430\u0437\u0456",color:"#A8AFAA"};const J=(0,m.connect)((function(e){return{steps:e.steps,currentStep:e.currentStep}}))((function(e){var t=e.steps,n=e.currentStep,r=(0,m.useDispatch)(),a=function(){var e=(0,o.default)((function*(e){yield r(D()),yield r(I(e)),yield r(P(e.theme))}));return function(t){return e.apply(this,arguments)}}(),i=function(e){switch(e){case L.id:return L.color;case V.id:return V.color;case q.id:return q.color;case G.id:return G.color;case Q.id:return Q.color;default:console.log("color not defined")}},l=function(e){switch(e){case L.id:return L.name;case V.id:return V.name;case q.id:return q.name;case G.id:return G.name;case Q.id:return Q.name;default:alert("Step Name not defined")}};return(0,M.jsx)(s.default,{style:_.statusBar,children:t.map((function(e){return(0,M.jsx)(S.default,{style:[_.buttonsBar(i(e.id)),n.id===e.id&&_.selectedButtons],onPress:function(){return a(e)},children:(0,M.jsxs)(u.default,{style:[_.textBtnBar],allowFontScaling:!0,maxFontSizeMultiplier:1,children:[" ",l(e.id)," "]})},e.id)}))})}));var H=n(5671),U=n(3144),X=n(6005),K=n.n(X),Y=n(6548).Buffer.from("alex:").toString("base64"),Z="https://landshaft.info/modules/viber/digger4.php",$=function(){function e(){(0,H.default)(this,e)}return(0,U.default)(e,null,[{key:"getStepOrders",value:function(e,t,n){return K().post("http://194.42.196.141:41001/UTP/hs/api/getStepOrders",{token:n,stepId:e,storageId:t},{headers:{Authorization:"Basic "+Y}}).then((function(e){return e.data})).catch((function(e){alert(e),console.log(e)}))}},{key:"getGroupOrders",value:function(e,t,n){return K().post("http://194.42.196.141:41001/UTP/hs/api/getStepOrders",{token:n,stepId:e,storageId:t,groupByOrder:!1},{headers:{Authorization:"Basic "+Y}}).then((function(e){return e.data})).catch((function(e){alert(e),console.log(e)}))}},{key:"getStoragesDig",value:function(e){return K().post("http://194.42.196.141:41001/UTP/hs/api/getStorages",{token:e},{headers:{Authorization:"Basic "+Y}}).then((function(e){return e.data})).catch((function(e){alert(e),console.log(e)}))}},{key:"getSteps",value:function(e){return K().post("http://194.42.196.141:41001/UTP/hs/api/getSteps",{token:e},{headers:{Authorization:"Basic "+Y}}).then((function(e){return e.data})).catch((function(e){alert(e),console.log(e)}))}},{key:"getToken",value:function(e,t){return K().post("http://194.42.196.141:41001/UTP/hs/api/getToken",{login:e,password:t},{headers:{Authorization:"Basic "+Y}}).then((function(e){return e.data})).catch((function(e){alert(e.response.data),console.log(e)}))}},{key:"getOrderInfo",value:function(e,t){return K().post("http://194.42.196.141:41001/UTP/hs/api/getOrderInfo",{token:e,orderid:t},{headers:{Authorization:"Basic "+Y}}).then((function(e){return e.data})).catch((function(e){alert(e.response.data),console.log(e)}))}},{key:"setNextStepGroup",value:function(e,t){return K().post("http://194.42.196.141:41001/UTP/hs/api/setNextOrderStep",{token:e,stepdata:t},{headers:{Authorization:"Basic "+Y}}).then((function(e){return e.data})).catch((function(e){alert(e),console.log(e)}))}},{key:"getNotifi",value:function(e){return K().post(Z,{method:"getNotifications",token:e},{headers:{Accept:"*/*"}}).then((function(e){return e.data})).catch((function(e){alert(e),console.log(e)}))}},{key:"updateNotifi",value:function(e,t,n){return K().post(Z,{method:"updateNotificationStatus",token:e,messageid:t,status:n}).then((function(e){return e.data})).catch((function(e){alert(e.response.data),console.log(e)}))}},{key:"deleteNotifi",value:function(e,t){return K().post(Z,{method:"deleteNotification",token:e,messageid:t}).then((function(e){return e.data})).catch((function(e){alert(e.response.data),console.log(e)}))}}]),e}();$.sendTokenDevice=function(e,t,n){K().post("https://us-central1-digger-3000.cloudfunctions.net/saveToken",{userToken:e,deviceToken:t,loged:n}).then((function(e){return console.log(e.data)})).catch((function(e){e.response?(console.error("\u0421\u0442\u0430\u0442\u0443\u0441 \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u0456:",e.response.status),console.error("\u0414\u0430\u043d\u0456 \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u0456:",e.response.data),console.error("\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u0456:",e.response.headers)):e.request?console.error("\u0417\u0430\u043f\u0438\u0442 \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0439, \u0430\u043b\u0435 \u043d\u0435 \u043e\u0442\u0440\u0438\u043c\u0430\u043d\u043e \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u0456:",e.request):console.error("\u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u0456 \u0437\u0430\u043f\u0438\u0442\u0443:",e.message)}))};var ee=n(6929),te=function(e,t,n){return function(){var r=(0,o.default)((function*(r){try{var o=yield $.getStepOrders(e.id,t,n);if(o.success){r(C(o));var a=0;o.data.forEach((function(e){return e.products.forEach((function(e){return a+=e.qty}))}));var i={orders:o.data.length,plants:a};r(W(i))}else console.log("Something went wrong!",o.errors)}catch(l){console.log("GetStep_ORDERS ERROR Thunk: "+JSON.stringify(l))}}));return function(e){return r.apply(this,arguments)}}()},ne=function(e,t,n){return function(){var r=(0,o.default)((function*(r){try{var o=yield $.getGroupOrders(e.id,t,n);if(o.success){r(B(o));var a=0;o.data.forEach((function(e){return e.orders.forEach((function(e){return a+=e.qty}))})),r(W({orders:0,plants:a}))}else console.log("Something went wrong!",o.errors)}catch(i){console.log("GetStep_ORDERS ERROR Thunk: "+JSON.stringify(i))}}));return function(e){return r.apply(this,arguments)}}()},re=function(e){return function(){var t=(0,o.default)((function*(t){try{var n=yield $.getNotifi(e);n.success?t(N(n)):alert(n.errors[0])}catch(r){console.log("Get_STEP ERROR Thunk: "+JSON.stringify(r))}}));return function(e){return t.apply(this,arguments)}}()},oe=function(e,t,n){return(0,o.default)((function*(){try{var r=yield $.updateNotifi(e,t,n);r.errors.length>0?alert(r.errors[0]):console.log("Something went wrong!",r.errors)}catch(o){console.log("Get_STEP ERROR ThunkSet: "+JSON.stringify(o))}}))},ae=n(4107),ie=f.default.create({textBtn:{color:"white",fontSize:14,fontWeight:900},buttonStep:function(e){return{borderRadius:3,backgroundColor:e,height:40,padding:5,elevation:3,shadowColor:"#52006A",shadowOffset:{width:-2,height:4},shadowOpacity:.2,shadowRadius:3,marginBottom:3,opacity:.95}},none:{display:"none"}}),le={id:"b5ffdb30-cdb0-11ed-836c-00c12700489e",name:"\u041d\u043e\u0432\u0435",color:"#00721B"},ce={id:"b5ffdb2c-cdb0-11ed-836c-00c12700489e",name:"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456",color:"#1FBB43"},de={id:"b5ffdb2e-cdb0-11ed-836c-00c12700489e",name:"\u0412\u0438\u043a\u043e\u043f\u0430\u043d\u043e",color:"#83E499"},se={id:"b5ffdb2d-cdb0-11ed-836c-00c12700489e",name:"\u0412 \u0434\u043e\u0440\u043e\u0437\u0456",color:"#C2DBC7"},ue={id:"b5ffdb2f-cdb0-11ed-836c-00c12700489e",name:"\u041d\u0430 \u0411\u0430\u0437\u0456",color:"#A8AFAA"};const fe=(0,m.connect)((function(e){return{currentStep:e.currentStep,dataChange:e.dataChange,token:e.token,currentStorageId:e.currentStorageId}}))((function(e){var t=e.path,n=e.currentStorageId,r=e.token,a=e.currentStep,i=e.dataChange,l=(0,m.useDispatch)(),c=function(){var e=(0,o.default)((function*(e){yield l(function(e,t){return(0,o.default)((function*(){try{var n=yield $.setNextStepGroup(e,t);n.errors.length>0?alert(n.errors[0]):console.log("\u0423\u0441\u043f\u0456\u0448\u043d\u043e!",n.success)}catch(r){console.log("Get_STEP ERROR ThunkSet: "+JSON.stringify(r))}}))}(r[0].token,i)),yield l(D()),"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"===e?yield l(te(a,n,r[0].token)):"\u0420\u043e\u0441\u043b\u0438\u043d\u0438 \u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"===e&&(yield l(ne(a,n,r[0].token)))}));return function(t){return e.apply(this,arguments)}}();return(0,M.jsx)(s.default,{children:i.length>0?(0,M.jsx)(s.default,{style:{position:"absolute",right:7,bottom:0},children:(0,M.jsx)(S.default,{style:[ie.buttonStep(function(e){switch(e){case le.id:return ce.color;case ce.id:return de.color;case de.id:return se.color;case se.id:return ue.color;case ue.id:return"gray";default:alert("Step Color not defined")}}(a.id)),0===i.length&&ie.none],onPress:function(){return c(t)},children:(0,M.jsx)(ae.default,{name:"done-outline",size:20,color:"snow",style:{flex:1},children:(0,M.jsxs)(u.default,{style:ie.textBtn,allowFontScaling:!0,maxFontSizeMultiplier:1,children:[" ",function(e){switch(e){case le.id:return name=ce.name;case ce.id:return name=de.name;case de.id:return name=se.name;case se.id:return name=ue.name;case ue.id:return null;default:alert("Step Name not defined")}}(a.id)," "]})})})}):null})}));var he=n(7662),ge=n(682),pe=n.n(ge),ye=n(8965),xe=n(6004);const me=(0,m.connect)((function(e){return{currentStep:e.currentStep,orders:e.stepOrders,currentStorageId:e.currentStorageId}}))((function(e){var t=e.currentStorageId,n=e.orderId,o=e.selectedAllOrder,a=e.prodactElem,i=e.currentStep,l=e.orders,c=(0,m.useDispatch)(),f=a.characteristic,h=a.lastChange,g=a.product,p=a.qty,y=a.unit,x=(0,r.useState)(o),S=(0,d.default)(x,2),b=S[0],w=S[1],j=(0,r.useState)(p),k=(0,d.default)(j,2),v=k[0],C=k[1],O=function(){var e={storageId:t,currentstepId:i.id,orderId:n,productid:g.id,characteristicid:f.id,unitid:y.id,actionqty:Number(v)};c(R(e))};return(0,r.useEffect)((function(){!0===o&&!0===b?O():!1===b?c(A({orderId:n,productid:g.id,characteristicid:f.id})):!0===b&&O()}),[o,b,l]),(0,M.jsx)(s.default,{style:Se.infoBlock,children:(0,M.jsxs)(s.default,{style:Se.costLineWrapper,children:[(0,M.jsx)(u.default,{style:Se.plantName,allowFontScaling:!0,maxFontSizeMultiplier:1,children:g.name}),(0,M.jsxs)(s.default,{style:Se.info,children:[(0,M.jsx)(u.default,{style:Se.characteristics,allowFontScaling:!0,maxFontSizeMultiplier:1,children:f.name}),(0,M.jsxs)(u.default,{style:Se.changeDate,allowFontScaling:!0,maxFontSizeMultiplier:1,children:["\u0437\u043c\u0456\u043d\u0435\u043d\u043e: ",h]})]}),(0,M.jsxs)(s.default,{style:Se.info,children:[(0,M.jsxs)(xe.default,{name:"pine-tree",size:20,color:"black",children:[(0,M.jsx)(xe.default,{name:"shovel",size:15,color:"black"}),(0,M.jsxs)(u.default,{style:Se.quantity,allowFontScaling:!0,maxFontSizeMultiplier:1,children:[" ",p," \u0448\u0442"]})]}),i.rightToChange?(0,M.jsxs)(s.default,{style:Se.changeinfo,children:[(0,M.jsxs)(s.default,{style:Se.changeinfoblock,children:[(0,M.jsx)(u.default,{style:Se.quantity,allowFontScaling:!0,maxFontSizeMultiplier:1,children:"\u0412\u0438\u043a\u043e\u043f\u0430\u043d\u043e:"}),(0,M.jsx)(ye.default,{style:Se.input,onChangeText:function(e){Number(e)||""===e?Number(e)>Number(p)?alert("\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0440\u043e\u0441\u043b\u0438\u043d \u043d\u0435 \u043c\u043e\u0436\u0435 \u0431\u0443\u0442\u0438 \u0431\u0456\u043b\u044c\u0448\u0430 \u043d\u0456\u0436 \u0432 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u0456"):C(e):alert("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u0456\u043b\u044c\u043a\u0456\u0442\u044c \u0432\u0438\u043a\u043e\u043f\u0430\u043d\u0438\u0445 \u0440\u043e\u0441\u043b\u0438\u043d - \u0446\u0438\u0444\u0440\u0430\u043c\u0438")},value:String(v),inputMode:"numeric",keyboardType:"numeric",onBlur:function(e){""===v?C(p):(O(),w(!0))},autoFocus:!1,onFocus:function(){return C("")},allowFontScaling:!0,maxFontSizeMultiplier:1})]}),(0,M.jsx)(he.default,{value:b,color:"#45aa45",onValueChange:function(){w(!b)},style:Se.checkBox})]}):null]})]})})}));var Se=f.default.create({infoBlock:{flexDirection:"row",justifyContent:"space-between",width:"100%",borderTopWidth:2,borderTopColor:"#b0acb0",marginTop:10},textStr:{fontWeight:600},costLineWrapper:{height:"auto",flex:1,flexDirection:"column",width:"100%",paddingLeft:3,paddingRight:3},plantName:{height:"auto",width:"auto",fontSize:13,fontWeight:"800",paddingTop:5,textShadowRadius:2},characteristics:{height:"auto",fontSize:13,textAlignVertical:"center",paddingLeft:10,flex:1},info:{flexDirection:"row",justifyContent:"space-between"},quantity:{height:"auto",textAlignVertical:"center",alignSelf:"center",paddingBottom:5,fontSize:14,fontWeight:600},changeinfo:{flexDirection:"row",justifyContent:"space-between"},changeinfoblock:{flexDirection:"row"},input:{height:28,width:40,margin:7,borderWidth:1,borderColor:"black",textAlign:"center",alignSelf:"flex-start"},checkBox:{alignSelf:"center",height:28,width:28},changeDate:{alignSelf:"flex-end",fontSize:11,fontWeight:900,color:"#c5c5c5"}}),be=n(7864),we=f.default.create({rowFront:{alignItems:"center",backgroundColor:"#fff",borderBottomColor:"black",justifyContent:"center",height:"auto",marginBottom:20,borderRadius:5,margin:5,elevation:10,shadowColor:"black",shadowOffset:{width:-2,height:4},shadowOpacity:.2,shadowRadius:3},costLineWrapper:{height:"auto",flex:1,flexDirection:"column",width:"100%",paddingLeft:5,paddingRight:5,paddingBottom:10},orderInfo:{height:"auto"},infoContainer:{flexDirection:"row",justifyContent:"space-between",paddingTop:7,paddingLeft:3,paddingRight:5,paddingBottom:3},orderClient:{height:"auto",lineHeight:20,paddingBottom:5,fontWeight:900,fontSize:15,width:"94%",textShadowRadius:2},viewGroup:{flexDirection:"row",justifyContent:"space-between"},orderNum:{fontSize:13,fontWeight:600},orderShipment:{height:"auto",fontSize:12,fontWeight:600},quantity:{height:"auto",textAlignVertical:"center",alignSelf:"center",fontSize:12,fontWeight:600},textStr:{fontWeight:600},checkBox:{height:25,width:25}});const je=(0,m.connect)((function(e){return{token:e.token}}))((0,r.memo)((function(e){var t=e.orders,n=e.token,a=e.rightToChange,i=(0,r.useState)(!1),l=(0,d.default)(i,2),c=l[0],f=l[1],h=(0,r.useState)("-"),g=(0,d.default)(h,2),p=g[0],y=g[1],x=t.customerName,m=t.orderNo,S=t.shipmentMethod,b=t.shipmentDate,w=t.products,j=t.orderId,k=0;w.forEach((function(e){return k+=e.qty}));var v=function(){var e=(0,o.default)((function*(){var e=yield $.getOrderInfo(n,j);y(e.data[0].comment)}));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){v()}),[t]),(0,M.jsx)(s.default,{style:we.rowFront,children:(0,M.jsxs)(s.default,{style:we.costLineWrapper,children:[(0,M.jsxs)(s.default,{style:we.orderInfo,children:[(0,M.jsxs)(s.default,{style:we.infoContainer,children:[(0,M.jsx)(u.default,{style:we.orderClient,allowFontScaling:!0,maxFontSizeMultiplier:1,children:x}),a?(0,M.jsx)(he.default,{value:c,color:"#45aa45",onValueChange:function(){return f(!c)},style:we.checkBox}):null]}),(0,M.jsxs)(s.default,{style:we.viewGroup,children:[(0,M.jsx)(be.default,{name:"truck-loading",size:14,color:"black",children:(0,M.jsxs)(u.default,{style:we.orderShipment,allowFontScaling:!0,maxFontSizeMultiplier:1,children:[(0,M.jsxs)(u.default,{style:we.textStr,children:[" ",S]})," "]})}),(0,M.jsxs)(xe.default,{name:"pine-tree",size:20,color:"black",children:[(0,M.jsx)(xe.default,{name:"pine-tree",size:14,color:"black"}),(0,M.jsxs)(u.default,{style:we.quantity,allowFontScaling:!0,maxFontSizeMultiplier:1,children:[" ",k," \u0448\u0442"]})]})]}),(0,M.jsxs)(s.default,{style:we.viewGroup,children:[(0,M.jsx)(xe.default,{name:"truck-delivery-outline",size:22,color:"black",children:(0,M.jsxs)(u.default,{style:we.orderShipment,allowFontScaling:!0,maxFontSizeMultiplier:1,children:[" ",b]})}),(0,M.jsx)(xe.default,{name:"clipboard-list-outline",size:19,color:"black",children:(0,M.jsxs)(u.default,{style:we.orderNum,allowFontScaling:!0,maxFontSizeMultiplier:1,children:[" ",m," "]})})]}),(0,M.jsx)(xe.default,{name:"comment-text-outline",size:16,color:"black",children:(0,M.jsxs)(u.default,{allowFontScaling:!0,maxFontSizeMultiplier:1,style:{fontWeight:800,fontSize:13},children:[" - ",p," "]})})]}),(0,M.jsx)(s.default,{children:w.map((function(e){return(0,M.jsx)(me,{orderId:j,prodactElem:e,selectedAllOrder:c},pe().generate())}))})]})})})));const ke=(0,m.connect)((function(e){return{orders:e.stepOrders,currentStep:e.currentStep,totalPlantQty:e.totalPlantQty,totalOrderQty:e.totalOrderQty,storageId:e.currentStorageId}}))((function(e){var t=e.orders,n=e.route,a=e.currentStep,l=e.totalPlantQty,c=e.totalOrderQty,f=e.storageId,p=(0,m.useDispatch)(),S=(0,r.useState)(!0),b=(0,d.default)(S,2),w=b[0],j=b[1],k=(0,r.useState)(!1),v=(0,d.default)(k,2),C=v[0],O=v[1],z=n.params.token,T=(0,r.useCallback)((function(e,t){return e.orderId.toString()+t}),[]),I=(0,r.useCallback)((function(e){var t=e.item;return(0,M.jsx)(je,{orders:t,rightToChange:a.rightToChange})}),[a]),B=function(){var e=(0,o.default)((function*(){j(!0),yield new Promise((function(e){return setTimeout(e,200)})),yield p(te(a,f,z[0].token))}));return function(){return e.apply(this,arguments)}}(),F=function(){var e=(0,o.default)((function*(){O(!0),yield p(te(a,f,z[0].token)),O(!1)}));return function(){return e.apply(this,arguments)}}();return(0,i.useFocusEffect)((0,r.useCallback)((function(){B().then((function(){return j(!1)}))}),[a])),(0,M.jsxs)(x.SafeAreaView,{style:ve.container,children:[(0,M.jsxs)(s.default,{style:ve.infoblock,children:[(0,M.jsxs)(xe.default,{name:"pine-tree",size:24,color:"black",children:[(0,M.jsx)(xe.default,{name:"pine-tree",size:18,color:"black"}),(0,M.jsxs)(u.default,{style:ve.textinfo,children:[" \u0432\u0441\u0456\u0445 \u0440\u043e\u0441\u043b\u0438\u043d: ",l," "]})]}),(0,M.jsx)(xe.default,{name:"clipboard-list-outline",size:24,color:"black",children:(0,M.jsxs)(u.default,{style:ve.textinfo,children:[" \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c: ",c," "]})})]}),w?(0,M.jsx)(s.default,{style:ve.loader,children:(0,M.jsx)(g.default,{size:"large",color:"#45aa45"})}):0===t.length?(0,M.jsx)(s.default,{style:ve.costLineWrapper,children:(0,M.jsx)(u.default,{style:ve.noneData,children:"\u041d\u0435\u043c\u0430\u0454 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c \u0437 \u0442\u0430\u043a\u0438\u043c \u0441\u0430\u0442\u0443\u0441\u043e\u043c"})}):(0,M.jsx)(h.default,{data:t,renderItem:I,keyExtractor:T,refreshControl:(0,M.jsx)(y.default,{onRefresh:F,refreshing:C}),style:{marginBottom:10},initialNumToRender:"4",maxToRenderPerBatch:"4"}),(0,M.jsx)(fe,{path:n.name}),(0,M.jsx)(J,{storageId:f,token:z})]})}));var ve=f.default.create({container:{flex:1,justifyContent:"center",marginBottom:3,marginTop:"ios"===p.default.OS?-45:0},loader:{height:"auto",width:"100%",justifyContent:"center",flex:1},textinfo:{color:"black",fontSize:13,fontWeight:700,textAlign:"center"},infoblock:{flexDirection:"row",justifyContent:"space-around",marginBottom:20,marginTop:15},costLineWrapper:{height:"auto",flex:1,flexDirection:"column",width:"100%",paddingLeft:5,paddingRight:5},noneData:{fontSize:20,textAlign:"center",fontWeight:900,color:"gray"}}),Ce=n(4498),Oe=f.default.create({viewContainer:{marginBottom:5,paddingTop:10,flex:1,flexDirection:"column",borderTopWidth:2,borderTopColor:"#b0acb0"},infoBlock:{flexDirection:"row",justifyContent:"space-between",flex:1},input:{height:30,width:40,borderWidth:1,borderColor:"black",textAlign:"center",alignSelf:"center",marginRight:12},orderInfoBlock:{flexDirection:"row",paddingBottom:2,paddingTop:2,paddingRight:2,flex:1},orderInfoChange:{flexDirection:"row",justifyContent:"flex-end"},orderNames:{alignSelf:"center",width:200,padding:3},qtyInfo:{alignSelf:"center",marginLeft:0,fontSize:14,fontWeight:700},infoComent:{flexDirection:"row",width:"100%"},textClient:{fontSize:11,fontWeight:500},nameClient:{fontSize:13,fontWeight:900,color:"#30302f"},textDataChange:{fontSize:10,fontWeight:900,color:"#c5c5c5",alignSelf:"flex-end"},textStrong:{fontSize:13,fontWeight:700},checkBox:{alignSelf:"center",height:28,width:28}});const ze=(0,m.connect)((function(e){return{currentStep:e.currentStep,currentStorageId:e.currentStorageId,token:e.token,groupOrders:e.groupOrders}}))((0,r.memo)((function(e){var t=e.order,n=e.selectedAll,a=e.plant,i=e.currentStep,l=e.currentStorageId,c=e.token,f=(0,m.useDispatch)(),h=t.orderId,g=t.orderNo,p=t.customerName,y=t.qty,x=t.shipmentDate,S=t.shipmentMethod,b=t.lastChange,w=a.characteristic,j=a.product,k=a.unit,v=(0,r.useState)(n),C=(0,d.default)(v,2),O=C[0],z=C[1],T=(0,r.useState)(y),I=(0,d.default)(T,2),B=I[0],F=I[1],D=(0,r.useState)("0"),N=(0,d.default)(D,2),W=N[0],P=N[1],E=function(){var e=(0,o.default)((function*(){var e=yield $.getOrderInfo(c,h);P(e.data[0].comment)}));return function(){return e.apply(this,arguments)}}(),_=function(){var e={storageId:l,currentstepId:i.id,orderId:h,productid:j.id,characteristicid:w.id,unitid:k.id,actionqty:Number(B)};f(R(e))};return(0,r.useEffect)((function(){E(),!0===n&&!0===O?_():!1===O?f(A({orderId:h,productid:j.id,characteristicid:w.id})):!0===O&&_()}),[n,O]),(0,M.jsxs)(Ce.default,{style:Oe.viewContainer,children:[(0,M.jsx)(u.default,{style:Oe.nameClient,allowFontScaling:!0,maxFontSizeMultiplier:1,children:p}),(0,M.jsxs)(s.default,{style:Oe.infoBlock,children:[(0,M.jsxs)(s.default,{style:Oe.orderInfoBlock,children:[(0,M.jsxs)(s.default,{style:Oe.orderNames,children:[(0,M.jsx)(be.default,{name:"truck-loading",size:13,color:"black",children:(0,M.jsxs)(u.default,{style:Oe.textStrong,allowFontScaling:!0,maxFontSizeMultiplier:1,children:[" ",S]})}),(0,M.jsx)(xe.default,{name:"truck-delivery-outline",size:18,color:"black",children:(0,M.jsxs)(u.default,{style:Oe.textClient,allowFontScaling:!0,maxFontSizeMultiplier:1,children:[" ",x]})}),(0,M.jsx)(xe.default,{name:"clipboard-list-outline",size:15,color:"black",children:(0,M.jsxs)(u.default,{style:Oe.textClient,allowFontScaling:!0,maxFontSizeMultiplier:1,children:[" ",g]})})]}),(0,M.jsxs)(u.default,{style:Oe.qtyInfo,allowFontScaling:!0,maxFontSizeMultiplier:1,children:[" ",y," \u0448\u0442"]})]}),(0,M.jsxs)(s.default,{style:{alignSelf:"center",flex:1,flexDirection:"column"},children:[i.rightToChange?(0,M.jsxs)(s.default,{style:Oe.orderInfoChange,children:[(0,M.jsx)(ye.default,{style:Oe.input,onChangeText:function(e){Number(e)||""===e?Number(e)>Number(y)?alert("\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0440\u043e\u0441\u043b\u0438\u043d \u043d\u0435 \u043c\u043e\u0436\u0435 \u0431\u0443\u0442\u0438 \u0431\u0456\u043b\u044c\u0448\u0430 \u043d\u0456\u0436 \u0432 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u0456"):F(e):alert("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u0456\u043b\u044c\u043a\u0456\u0442\u044c \u0432\u0438\u043a\u043e\u043f\u0430\u043d\u0438\u0445 \u0440\u043e\u0441\u043b\u0438\u043d - \u0446\u0438\u0444\u0440\u0430\u043c\u0438")},value:String(B),inputMode:"numeric",keyboardType:"numeric",onBlur:function(e){""===B?F(y):(_(),z(!0))},autoFocus:!1,onFocus:function(){return F("")},allowFontScaling:!0,maxFontSizeMultiplier:1}),(0,M.jsx)(he.default,{value:O,color:"#45aa45",onValueChange:function(){z(!O)},style:Oe.checkBox})]}):null,(0,M.jsxs)(u.default,{style:Oe.textDataChange,allowFontScaling:!0,maxFontSizeMultiplier:1,children:["\u0437\u043c\u0456\u043d\u0435\u043d\u043e: ",b," "]})]})]}),(0,M.jsx)(s.default,{style:Oe.infoComent,children:(0,M.jsx)(xe.default,{name:"comment-text-outline",size:16,color:"black",children:(0,M.jsx)(u.default,{style:Oe.textClient,allowFontScaling:!0,maxFontSizeMultiplier:1,children:(0,M.jsxs)(u.default,{style:{fontWeight:800},children:[" - ",W," "]})})})})]})})));var Te=f.default.create({rowFront:{alignItems:"center",backgroundColor:"#fff",borderBottomColor:"black",justifyContent:"center",height:"auto",marginBottom:20,paddingBottom:5,borderRadius:5,margin:5,elevation:5,shadowColor:"black",shadowOffset:{width:-2,height:4},shadowOpacity:.2,shadowRadius:3},costLineWrapper:{height:"auto",flex:1,flexDirection:"column",width:"100%",paddingLeft:3,paddingRight:3},plantName:{height:"auto",fontSize:15,fontWeight:"700",width:"94%",textShadowRadius:3,paddingRight:2},characteristics:{height:"auto",fontSize:13,textAlignVertical:"center",paddingLeft:10,paddingBottom:1,flex:1},info:{flexDirection:"row",justifyContent:"space-between",paddingRight:3},quantity:{height:"auto",textAlignVertical:"center",alignSelf:"center",fontSize:12,fontWeight:600},changeinfo:{flexDirection:"row",justifyContent:"space-between",paddingTop:7,paddingLeft:3},infoContainer:{flexDirection:"row",justifyContent:"space-between",paddingTop:7,paddingLeft:3,paddingRight:5},orderInfoBlock:{flexDirection:"column",marginTop:3,width:"100%"},checkBox:{height:25,width:25}});const Ie=(0,r.memo)((function(e){var t=e.item,n=e.rightToChange,o=(0,r.useState)(!1),a=(0,d.default)(o,2),i=a[0],l=a[1],c=0;return t.orders.forEach((function(e){return c+=e.qty})),(0,M.jsx)(s.default,{style:Te.rowFront,children:(0,M.jsxs)(s.default,{style:Te.costLineWrapper,children:[(0,M.jsxs)(s.default,{style:Te.infoContainer,children:[(0,M.jsx)(u.default,{style:Te.plantName,allowFontScaling:!0,maxFontSizeMultiplier:1,children:t.product.name}),n?(0,M.jsx)(he.default,{value:i,color:"#45aa45",onValueChange:function(){return l(!i)},style:Te.checkBox}):null]}),(0,M.jsxs)(s.default,{style:Te.info,children:[(0,M.jsx)(u.default,{style:Te.characteristics,allowFontScaling:!0,maxFontSizeMultiplier:1,children:t.characteristic.name}),(0,M.jsxs)(xe.default,{name:"pine-tree",size:20,color:"black",children:[(0,M.jsx)(xe.default,{name:"pine-tree",size:14,color:"black"}),(0,M.jsxs)(u.default,{style:Te.quantity,allowFontScaling:!0,maxFontSizeMultiplier:1,children:[" ",c," \u0448\u0442"]})]})]}),(0,M.jsx)(s.default,{style:Te.changeinfo,children:(0,M.jsx)(s.default,{style:Te.orderInfoBlock,children:t.orders.map((function(e){return(0,M.jsx)(ze,{plant:t,order:e,selectedAll:i},pe().generate())}))})})]})})}));const Be=(0,m.connect)((function(e){return{groupOrders:e.groupOrders,currentStep:e.currentStep,totalPlantQty:e.totalPlantQty,storageId:e.currentStorageId}}))((function(e){var t=e.route,n=e.groupOrders,a=e.currentStep,l=e.totalPlantQty,c=e.storageId,f=(0,r.useState)(!0),p=(0,d.default)(f,2),S=p[0],b=p[1],w=t.params.token,j=(0,r.useState)(!1),k=(0,d.default)(j,2),v=k[0],C=k[1],O=(0,m.useDispatch)(),z=(0,r.useCallback)((function(e){var t=e.item;return(0,M.jsx)(Ie,{item:t,rightToChange:a.rightToChange})}),[a]),T=(0,r.useCallback)((function(e,t){return e.product.id.toString()+t}),[]),I=function(){var e=(0,o.default)((function*(){b(!0),yield new Promise((function(e){return setTimeout(e,200)})),yield O(ne(a,c,w[0].token))}));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,o.default)((function*(){C(!0),yield O(ne(a,c,w[0].token)),C(!1)}));return function(){return e.apply(this,arguments)}}();return(0,i.useFocusEffect)((0,r.useCallback)((function(){I().then((function(){return b(!1)}))}),[a])),(0,M.jsxs)(x.SafeAreaView,{style:Fe.container,children:[(0,M.jsx)(s.default,{style:Fe.infoblock,children:(0,M.jsxs)(xe.default,{name:"pine-tree",size:24,color:"black",children:[(0,M.jsx)(xe.default,{name:"pine-tree",size:18,color:"black"}),(0,M.jsxs)(u.default,{style:Fe.textinfo,children:[" \u0432\u0441\u0456\u0445 \u0440\u043e\u0441\u043b\u0438\u043d: ",l," "]})]})}),S?(0,M.jsx)(s.default,{style:Fe.loader,children:(0,M.jsx)(g.default,{size:"large",color:"#45aa45"})}):0==n.length?(0,M.jsx)(s.default,{style:Fe.costLineWrapper,children:(0,M.jsx)(u.default,{style:Fe.noneData,allowFontScaling:!0,maxFontSizeMultiplier:1,children:"\u0412 \u0446\u044c\u043e\u043c\u0443 \u043f\u043e\u043b\u0456 \u043d\u0435\u043c\u0430\u0454 \u0440\u043e\u0441\u043b\u0438\u043d \u0437 \u0442\u0430\u043a\u0438\u043c \u0441\u0430\u0442\u0443\u0441\u043e\u043c"})}):(0,M.jsx)(h.default,{data:n,renderItem:z,keyExtractor:T,refreshControl:(0,M.jsx)(y.default,{onRefresh:B,refreshing:v}),refreshing:v,style:{marginBottom:10},initialNumToRender:"4",maxToRenderPerBatch:"4"}),(0,M.jsx)(fe,{path:t.name}),(0,M.jsx)(J,{storageId:c})]})}));var Fe=f.default.create({container:{flex:1,justifyContent:"center",marginBottom:3,marginTop:"ios"===p.default.OS?-45:0},costLineWrapper:{height:"auto",flex:1,flexDirection:"column",width:"100%",paddingLeft:5,paddingRight:5},textinfo:{color:"black",fontSize:13,fontWeight:700},infoblock:{flexDirection:"row",justifyContent:"space-around",marginBottom:20,marginTop:15},loader:{height:"auto",width:"100%",justifyContent:"center",flex:1},noneData:{fontSize:20,textAlign:"center",fontWeight:900,color:"gray"}}),Re=(0,c.default)();const De=(0,m.connect)((function(e){return{currentColor:e.currentColorStep,token:e.token,digStorages:e.digStorages}}))((function(e){var t=e.currentColor,n=e.token,o=e.digStorages,a=(0,m.useDispatch)();return(0,r.useEffect)((function(){1===o.length&&a(F(o[0].id))}),[]),(0,M.jsxs)(Re.Navigator,{initialRouteName:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",screenOptions:{tabBarActiveTintColor:"#ffff",tabBarLabelStyle:{fontSize:12,fontWeight:"700"},tabBarStyle:{backgroundColor:t},tabBarIndicatorStyle:{backgroundColor:"#ffff",height:4},lazy:!0},children:[(0,M.jsx)(Re.Screen,{name:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",component:ke,options:{tabBarLabel:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"},initialParams:{token:n}}),(0,M.jsx)(Re.Screen,{name:"\u0420\u043e\u0441\u043b\u0438\u043d\u0438 \u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f",component:Be,options:{tabBarLabel:"\u0412\u0441\u0456 \u0420\u043e\u0441\u043b\u0438\u043d\u0438"},initialParams:{token:n}})]})}));var Ae=n(8671),Ne=f.default.create({container:{width:"100%",height:"100%",flex:1,marginTop:"ios"===p.default.OS?-45:0},containerView:{flex:1,alignItems:"center",justifyContent:"flex-start",backgroundColor:"#d8fff2"},text:{color:"black",fontSize:20,marginBottom:15,marginTop:25},button:{padding:10,marginTop:10,marginBottom:10,borderRadius:10,backgroundColor:"#45aa45",minWidth:"63%",minHeight:50,elevation:1,shadowOffset:{width:-3,height:3},shadowOpacity:.2,shadowRadius:3,shadowColor:"black",justifyContent:"center"},textBtn:{color:"white",alignSelf:"center",fontSize:18,fontWeight:800}});const We=(0,m.connect)((function(e){return{digStorages:e.digStorages}}))((function(e){var t=e.navigation,n=e.digStorages,r=(0,m.useDispatch)();return(0,M.jsx)(x.SafeAreaView,{style:Ne.container,children:(0,M.jsxs)(s.default,{style:Ne.containerView,children:[(0,M.jsx)(u.default,{style:Ne.text,allowFontScaling:!0,maxFontSizeMultiplier:1,children:" \u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u043f\u043e\u043b\u0435 "}),(0,M.jsx)(h.default,{data:n,renderItem:function(e){var n=e.item;return(0,M.jsx)(Ae.default,{style:Ne.button,onPress:function(){r(F(n.id)),t.navigate("\u041f\u043e\u043b\u0435",{title:n.name})},children:(0,M.jsxs)(u.default,{style:Ne.textBtn,allowFontScaling:!0,maxFontSizeMultiplier:1,children:[" ",n.name," "]},n.id)})},keyExtractor:function(e){return e.id.toString()},style:{padding:10}})]})})}));var Pe=n(2285);const Ee=n.p+"static/media/logoIcon.b365ad40b1409bf6bf38.png";var Me=f.default.create({container:{flex:1,alignItems:"center",backgroundColor:"#d8fff2",gap:70},text:{fontSize:20,textAlign:"center",color:"white",fontWeight:"500"},button:{marginTop:3,borderRadius:5,backgroundColor:"#45aa45",width:140,minHeight:45,elevation:5,shadowColor:"#52006A",shadowOffset:{width:-2,height:4},shadowOpacity:.2,shadowRadius:3,display:"flex",justifyContent:"center"},input:{height:40,width:210,margin:12,padding:10,backgroundColor:"white",elevation:1,shadowColor:"#52006A",shadowOffset:{width:-2,height:1},shadowOpacity:.2,shadowRadius:1,borderRadius:3},containerView:{alignItems:"center",backgroundColor:"#dbdcdd",borderRadius:7,padding:15,elevation:10,shadowColor:"#52006A",shadowOffset:{width:-2,height:4},shadowOpacity:.2,shadowRadius:3},logo:{height:65,width:250,marginTop:50}});const _e=(0,m.connect)((function(e){return{digStorages:e.digStorages,token:e.token}}))((function(){var e=(0,m.useDispatch)(),t=(0,r.useState)(""),n=(0,d.default)(t,2),a=n[0],i=n[1],l=(0,r.useState)(""),c=(0,d.default)(l,2),f=c[0],h=c[1],y=(0,r.useState)(!1),x=(0,d.default)(y,2),b=x[0],w=x[1];(0,r.useEffect)((function(){v()}),[]);var j=function(){var t=(0,o.default)((function*(){var t,n;w(!0),yield k(f,a),yield e((t=a,n=f,function(){var e=(0,o.default)((function*(e){try{var r=yield $.getToken(t,n);console.log(r),r.success?(e(z(r.data)),"web"===p.default.OS?yield localStorage.setItem("token",JSON.stringify(r.data)):yield ee.setItemAsync("token",JSON.stringify(r.data))):alert(r.errors[0])}catch(o){console.log("Get_STEP ERROR Thunk: "+JSON.stringify(o))}}));return function(t){return e.apply(this,arguments)}}())),w(!1)}));return function(){return t.apply(this,arguments)}}(),k=function(){var e=(0,o.default)((function*(e,t){"web"===p.default.OS?(yield localStorage.setItem("pass",e),yield localStorage.setItem("login",t)):(yield ee.setItemAsync("pass",e),yield ee.setItemAsync("login",t))}));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=(0,o.default)((function*(){var e,t;"web"===p.default.OS?(e=yield localStorage.getItem("pass"),t=yield localStorage.getItem("login")):(e=yield ee.getItemAsync("pass"),t=yield ee.getItemAsync("login")),e&&t&&(i(t),h(e))}));return function(){return e.apply(this,arguments)}}();return(0,M.jsxs)(Ce.default,{style:Me.container,children:[(0,M.jsx)(Pe.default,{source:Ee,style:Me.logo}),b?(0,M.jsx)(s.default,{style:Me.loader,children:(0,M.jsx)(g.default,{size:"large",color:"#45aa45"})}):(0,M.jsxs)(s.default,{style:Me.containerView,children:[(0,M.jsx)(ye.default,{style:Me.input,onChangeText:i,value:a,placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430",placeholderTextColor:"gray"}),(0,M.jsx)(ye.default,{style:Me.input,onChangeText:h,value:f,placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",secureTextEntry:!0,placeholderTextColor:"gray"}),(0,M.jsx)(S.default,{style:Me.button,onPress:function(){return j()},children:(0,M.jsx)(u.default,{style:Me.text,allowFontScaling:!0,maxFontSizeMultiplier:1,children:" \u0423\u0432\u0456\u0439\u0442\u0438 "})})]})]})}));var Le=n(718),Ve=n(512),qe=n(6409),Ge=n(4866),Qe=n(5819),Je=n(4656),He=n(5376);const Ue=function(){qe.setNotificationHandler({handleNotification:function(){var e=(0,o.default)((function*(){return{shouldShowAlert:!0,shouldPlaySound:!0,shouldSetBadge:!0}}));return function(){return e.apply(this,arguments)}}()});var e=function(){var e=(0,o.default)((function*(e,t){var n;if("android"===p.default.OS&&(yield Ge.default("default",{name:"default",importance:Qe.AndroidImportance.MAX,vibrationPattern:[0,250,250,250],lightColor:"#ffffff"})),Ve.isDevice&&"android"===p.default.OS){var r=(yield Je.getPermissionsAsync()).status,o=r;if("granted"!==r)o=(yield Je.requestPermissionsAsync()).status;if("granted"!==o)return void alert("Failed to get push token for push notification!");n=(yield He.default()).data,console.log("pushToken",n),yield $.sendTokenDevice(e,n,t)}else alert("Must use physical device for Push Notifications")}));return function(t,n){return e.apply(this,arguments)}}();return{registerDeviceToken:e}};var Xe=f.default.create({textBtn:{color:"snow",fontSize:12,fontWeight:600,alignSelf:"center"},buttonStep:{borderRadius:5,textAlign:"center",textAlignVertical:"center",alignSelf:"center",justifyContent:"center",width:25,marginLeft:10,marginRight:10,flexDirection:"row"}});const Ke=function(e){e.navigation,e.token;var t=(0,m.useDispatch)(),n=(Ue().registerDeviceToken,function(){var e=(0,o.default)((function*(){"web"===p.default.OS?yield localStorage.removeItem("token"):yield ee.deleteItemAsync("token")}));return function(){return e.apply(this,arguments)}}());return(0,M.jsx)(Ae.default,{style:[Xe.buttonStep],onPress:function(){n(),t(T())},children:(0,M.jsx)(Le.default,{name:"log-out",size:24,color:"black"})})};var Ye=n(5686);const Ze=function(e){var t=e.title,n=(0,m.useSelector)((function(e){return e.token}))[0].username;return(0,M.jsxs)(Ce.default,{style:{gap:5,marginLeft:10,flex:1,paddingTop:5},children:[(0,M.jsx)(Ye.default,{name:"location",size:17,color:"black",children:(0,M.jsxs)(u.default,{style:{fontWeight:700},allowFontScaling:!0,maxFontSizeMultiplier:1,children:[" ",t]})}),(0,M.jsx)(xe.default,{style:{height:20},name:"account-cowboy-hat-outline",size:14,color:"black",children:(0,M.jsxs)(u.default,{style:{fontWeight:500},allowFontScaling:!0,maxFontSizeMultiplier:1,children:[" ",n]})})]})};var $e=n(8289),et=n(5544),tt=n(4381);const nt=function(e){var t=e.notifi,n=e.token,r=(0,m.useDispatch)(),a=t,i=function(){var e=(0,o.default)((function*(){"new"===a.message_status?yield r(oe(n,a.message_id,"read")):"read"===a.message_status&&(yield r(oe(n,a.message_id,"new"))),yield r(re(n))}));return function(){return e.apply(this,arguments)}}(),l=function(){var e=(0,o.default)((function*(){yield r(function(e,t){return(0,o.default)((function*(){try{var n=yield $.deleteNotifi(e,t);n.errors.length>0?alert(n.errors[0]):console.log("Something went wrong!",n.errors)}catch(r){console.log("Get_STEP ERROR ThunkSet: "+JSON.stringify(r))}}))}(n,a.message_id)),yield yield r(re(n))}));return function(){return e.apply(this,arguments)}}();return(0,M.jsxs)(s.default,{style:rt.renderRow,children:[(0,M.jsxs)(s.default,{style:rt.renderBlock,children:[(0,M.jsx)(Ae.default,{onPress:function(){return i()},children:"new"===a.message_status?(0,M.jsx)($e.default,{name:"eye-outline",size:24,color:"black"}):"read"===a.message_status?(0,M.jsx)($e.default,{name:"eye-sharp",size:24,color:"black"}):null}),(0,M.jsx)(u.default,{style:rt.renderText,children:a.message_body})]}),(0,M.jsx)(Ae.default,{onPress:function(){return l()},children:(0,M.jsx)($e.default,{name:"md-trash-outline",size:24,color:"black"})})]})};var rt=f.default.create({renderRow:{flexDirection:"row",marginTop:10,paddingTop:5,justifyContent:"space-between",minWidth:180,borderTopWidth:1.5,borderTopColor:"#b0acb0"},renderBlock:{flexDirection:"row",gap:5,alignItems:"center"},renderText:{maxWidth:"80%"}});const ot=(0,m.connect)((function(e){return{notifiState:e.notifications,token:e.token}}))((function(e){var t=e.notifiState,n=e.token,a=(0,m.useDispatch)(),l=(0,r.useState)(!1),c=(0,d.default)(l,2),f=c[0],g=c[1],p=(0,r.useState)(!1),x=(0,d.default)(p,2),S=x[0],b=x[1],w=(0,r.useCallback)((function(e){return e.message_id.toString()}),[]),j=(0,r.useCallback)((function(e){var t=e.item;return(0,M.jsx)(nt,{notifi:t,token:n[0].token})}),[]),k=function(){var e=(0,o.default)((function*(){b(!0),yield a(re(n[0].token)),b(!1)}));return function(){return e.apply(this,arguments)}}();return(0,i.useFocusEffect)((0,r.useCallback)((function(){}),[f])),(0,M.jsxs)(s.default,{children:[(0,M.jsx)(et.default,{animationType:"slide",transparent:!0,visible:f,onRequestClose:function(){return g(!f)},children:(0,M.jsx)(s.default,{style:at.centeredView,children:(0,M.jsxs)(s.default,{style:at.modalView,children:[(0,M.jsx)(u.default,{style:at.textStyle,allowFontScaling:!0,maxFontSizeMultiplier:1,children:"\u041f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f"}),t.length>0?(0,M.jsx)(h.default,{data:t,renderItem:j,keyExtractor:w,refreshControl:(0,M.jsx)(y.default,{onRefresh:k,refreshing:S})}):(0,M.jsx)(u.default,{children:"\u041f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u044c \u043d\u0435\u043c\u0430\u0454"}),(0,M.jsx)(Ae.default,{onPress:function(){return g(!f)},style:at.buttonModal,children:(0,M.jsx)(u.default,{style:at.modalText,allowFontScaling:!0,maxFontSizeMultiplier:1,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})})]})})}),(0,M.jsxs)(Ae.default,{onPress:function(){return g(!f)},style:{alignSelf:"center"},children:[(0,M.jsx)($e.default,{name:"notifications-outline",size:23,color:"black"}),(0,M.jsx)(tt.Badge,{containerStyle:{position:"absolute",top:-5,right:-9},badgeStyle:{backgroundColor:"#45aa45"},value:t.length})]})]})}));var at=f.default.create({centeredView:{flex:1,alignItems:"center",marginTop:"20%"},modalView:{margin:20,backgroundColor:"white",borderRadius:10,paddingLeft:10,paddingRight:10,paddingBottom:5,paddingTop:5,alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:4,elevation:5,minHeight:"20%",maxHeight:"80%",minWidth:300,gap:5},buttonModal:{marginRight:5,borderRadius:3,textAlign:"center",backgroundColor:"#45aa45",width:80,textAlignVertical:"center",alignSelf:"center",height:35,elevation:3,justifyContent:"center"},buttonClose:{borderRadius:3,height:35,elevation:3,minWidth:100,backgroundColor:"red",marginEnd:5,justifyContent:"center"},textStyle:{fontWeight:500,fontSize:18},modalText:{textAlign:"center",alignSelf:"center",color:"snow",fontSize:15,fontWeight:700}});const it=function(){var e=(0,m.useDispatch)(),t=(Ue().registerDeviceToken,function(){var t=(0,o.default)((function*(t){yield e(function(e){return function(){var t=(0,o.default)((function*(t){try{var n=yield $.getStoragesDig(e);n.success?t(v(n)):console.log("Something went wrong!",n.errors)}catch(r){console.log("GetDig_STORAGES ERROR Thunk: "+JSON.stringify(r))}}));return function(e){return t.apply(this,arguments)}}()}(t)),yield e(function(e){return function(){var t=(0,o.default)((function*(t){try{var n=yield $.getSteps(e);n.success?(t(O(n)),t(I(n.data[0])),t(P(n.data[0].theme))):console.log("Something went wrong!",n.errors)}catch(r){console.log("Get_STEP ERROR Thunk: "+JSON.stringify(r))}}));return function(e){return t.apply(this,arguments)}}()}(t))}));return function(e){return t.apply(this,arguments)}}());return{callData:t}};var lt=(0,a.default)();function ct(){var e=(0,m.useDispatch)(),t=(0,m.useSelector)((function(e){return e.token})),n=(0,m.useSelector)((function(e){return e.digStorages})),a=it().callData,c=(0,i.useNavigation)(),d=function(){var t=(0,o.default)((function*(){var t;t="web"===p.default.OS?yield localStorage.getItem("token"):yield ee.getItemAsync("token");var n=JSON.parse(t);n&&(yield e(z(n)),yield a(n[0].token))}));return function(){return t.apply(this,arguments)}}();return(0,r.useEffect)((function(){0==t.length?d():a(t[0].token)}),[t]),(0,r.useEffect)((function(){1==n.length&&c.navigate("\u041f\u043e\u043b\u0435",{title:n[0].name,token:t[0],storageId:n[0].id})}),[n.length]),(0,M.jsx)(s.default,{style:{display:"flex",flex:1},children:(0,M.jsx)(s.default,{style:{maxWidth:750,minWidth:250,width:"100%",alignSelf:"center",flex:1},children:(0,M.jsx)(lt.Navigator,{children:t.length>0?(0,M.jsxs)(lt.Group,{children:[(0,M.jsx)(lt.Screen,{name:"\u0412\u0441\u0456 \u043f\u043e\u043b\u044f",component:We,options:function(e){var n=e.route,r=e.navigation;return{headerRight:function(){return(0,M.jsxs)(s.default,{style:{flexDirection:"row",gap:5},children:[(0,M.jsx)(ot,{}),(0,M.jsx)(Ke,{navigation:r,token:t})]})},headerTitle:function(){return(0,M.jsx)(Ze,{title:n.name})},headerBackVisible:!1,headerTitleAlign:"left"}}}),(0,M.jsx)(lt.Screen,{name:"\u041f\u043e\u043b\u0435",component:De,options:function(e){var n=e.route,r=e.navigation;return{headerLeft:function(){return 0==r.getState().index?null:(0,M.jsx)(l.default,{style:{marginHorizontal:0},onPress:function(){return r.goBack()}})},headerTitle:function(){return(0,M.jsx)(Ze,{title:n.params.title})},headerRight:function(){return(0,M.jsxs)(s.default,{style:{flexDirection:"row",gap:5},children:[(0,M.jsx)(ot,{}),(0,M.jsx)(Ke,{navigation:r,token:t})]})},headerBackVisible:!1}}})]}):(0,M.jsx)(lt.Group,{children:(0,M.jsx)(lt.Screen,{name:"\u0412\u0445\u0456\u0434",component:_e,options:{title:"\u0412\u0445\u0456\u0434",headerLeft:function(){return null}}})})})})})}var dt=(0,w.configureStore)({reducer:E,middleware:function(e){return e({serializableCheck:!1})}}),st=n(4112),ut=n(7166);function ft(){return(0,M.jsxs)(m.Provider,{store:dt,children:[(0,M.jsx)(st.default,{hidden:!1,barStyle:"dark-content",backgroundColor:"white"}),(0,M.jsx)(ut.default,{children:(0,M.jsx)(ct,{})})]})}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.amdO={},(()=>{var e=[];n.O=(t,r,o,a)=>{if(!r){var i=1/0;for(s=0;s<e.length;s++){for(var[r,o,a]=e[s],l=!0,c=0;c<r.length;c++)(!1&a||i>=a)&&Object.keys(n.O).every((e=>n.O[e](r[c])))?r.splice(c--,1):(l=!1,a<i&&(i=a));if(l){e.splice(s--,1);var d=o();void 0!==d&&(t=d)}}return t}a=a||0;for(var s=e.length;s>0&&e[s-1][2]>a;s--)e[s]=e[s-1];e[s]=[r,o,a]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&o&&r;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,n.d(a,i),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,a,[i,l,c]=r,d=0;if(i.some((t=>0!==e[t]))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(c)var s=c(n)}for(t&&t(r);d<i.length;d++)a=i[d],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(s)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[58],(()=>n(6454)));r=n.O(r)})();
//# sourceMappingURL=main.21882662.js.map